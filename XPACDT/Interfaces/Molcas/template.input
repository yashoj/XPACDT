&SEWARD
    * Coordinates of the atoms
    coord               
        {n_atoms}
        * Mandatory ignored line for XYZ format
        {xyz}

    * Basis set to use for the computation
    basis = {basis}
    * Symmetry to be considered
    group = nosym

* SCF computation assuming 0 total charge
&SCF

* The full RASSCF part is given by the user
{rasscf}

* Run Alaska to get the gradient
* TODO Should the gradient for each energy surface be recomputed each time ?
&ALASKA
    pnew

* We only compute the lower subdiagonal triangle of the NAC vector matrix
* since it is antisymmetric (for real vectors). That means
* d_IJ = -d_JI
* and
* d_II = 0
* TODO Multithread this part from python
>> FOREACH I in (1 .. {n_states})
    >> EVAL JMAX = $I - 1
    >> FOREACH J in (1 .. $JMAX)

        * Run Alaska to get the nonadiabatic coupling vectors (NAC)
        &ALASKA
            nocsf
            nac = $I $J

    >> ENDDO
>> ENDDO